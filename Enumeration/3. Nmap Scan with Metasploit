ðŸ” Enumeration â€” Nmap Port Scanning & Metasploit Recon

ðŸ–¥ï¸ Target Information
Example Target: 10.4.22.173  

âš™ï¸ Nmap Scanning Commands (run from shell)

> nmap 10.4.22.173                                               # Default Nmap Scan
> nmap -Pn 10.4.22.173                                           # Nmap Scan without Ping Probe
> nmap -Pn -sV -O 10.4.22.173                                    # Service Version + OS Detection
> nmap -Pn -sV -O 10.4.22.173 -oX windows-ser.xml                # Scan + Export to XML (for importing into Metasploit)

ðŸ§­ Metasploit: Using `db_nmap` & Workspaces

These commands are intended to be used **inside `msfconsole`** (except `service`/`msfdb init` which are run from shell).
> service postgresql start
> msfconsole
> msfdb init                                                      # If DB is not initialized (Kali), run

Metasploit workspace & `db_nmap` commands (inside msfconsole)

> workspace                                                       # show current workspace
> workspace -a Nmap_MSF                                           # create/select a new workspace named 'Nmap_MSF'
> db_nmap -Pn -sV -O 10.4.22.173                                  # run nmap and import results into DB
> hosts                                                           # list imported hosts
> services                                                        # list discovered services
> vulns                                                           # list discovered vulnerabilities
> db_import /root/windows-ser.xml                                 # alternatively import an XML file

Tip: When to use `db_nmap` vs `nmap` then import.
- `db_nmap` runs Nmap from within Metasploit and stores results automatically.  
- Running `nmap` externally with `-oX` gives you a portable XML file to keep in `scans/` and import later using `db_import`. 
